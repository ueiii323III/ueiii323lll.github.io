const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-4q_r8Clj.js","assets/vendor-Ci7_s8hB.js","assets/settings-DCgBpKBT.js","assets/works-jBBbHn6Y.js","assets/images-OX7qfCzv.js","assets/Home-CEPlHIqD.css","assets/Portfolio-ZDRfQBlR.js","assets/Portfolio-BtL8GbFW.css","assets/PortfolioDetail-zNIJ7y4L.js","assets/PortfolioDetail-Cnu_hMXB.css","assets/About-B_761e2L.js","assets/profile-IZFUpCG4.js","assets/tdesign-wfUGn-Om.js","assets/tdesign-DsryMCgq.css","assets/About-G5ake5d5.css","assets/Login-C5Mpje-j.js","assets/Login-BqEnRXPg.css","assets/Dashboard-B-Z3pKgC.js","assets/Dashboard-Bd1i4sKM.css","assets/Works-fVdSGgIm.js","assets/Works-0hlBIUF2.css","assets/WorkEdit-fmqSALcs.js","assets/WorkEdit-54I5dpfn.css","assets/Settings-Yqjg-lId.js","assets/Settings-tjuLHi36.css"])))=>i.map(i=>d[i]);
import{z as tt,r as I,c as k,j as T,o as et,b as ot,A as E,B as P,D as e,k as n,E as $,R as z,G as d,F as x,H as G,I as v,J as h,K as R,L as w,M as L,N as M,u as D,v as V,O as nt,P as W,Q as at,S as st,U as rt,V as it}from"./vendor-Ci7_s8hB.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}})();const N=tt("auth",()=>{const a=I(null),s=I(!1),t=I(!1),r=k(()=>{var l;return((l=a.value)==null?void 0:l.role)==="admin"}),o=k(()=>{var l,p;return s.value&&(((l=a.value)==null?void 0:l.role)==="admin"||((p=a.value)==null?void 0:p.role)==="editor")});return{user:a,isAuthenticated:s,isLoading:t,isAdmin:r,canEdit:o,initAuth:()=>{const l=localStorage.getItem("admin_user"),p=localStorage.getItem("admin_authenticated");l&&p==="true"&&(a.value=JSON.parse(l),s.value=!0)},login:async(l,p)=>{t.value=!0;try{if(await new Promise(u=>setTimeout(u,1e3)),l==="admin"&&p==="admin123"){const u={id:"1",username:"admin",email:"admin@sun-kexin.com",avatar:"/src/assets/images/avatar/profile.jpg",role:"admin",createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()};return a.value=u,s.value=!0,localStorage.setItem("admin_user",JSON.stringify(u)),localStorage.setItem("admin_authenticated","true"),!0}return!1}catch(u){return console.error("登录失败:",u),!1}finally{t.value=!1}},logout:()=>{a.value=null,s.value=!1,localStorage.removeItem("admin_user"),localStorage.removeItem("admin_authenticated")},updateUser:l=>{a.value&&(a.value={...a.value,...l},localStorage.setItem("admin_user",JSON.stringify(a.value)))}}}),lt={class:"nav"},ct={class:"nav-brand"},ut={class:"nav-menu"},dt={class:"nav-actions"},mt=T({__name:"AppHeader",setup(a){const s=N(),t=I(!1),r=[{name:"首页",path:"/"},{name:"作品展示",path:"/portfolio"},{name:"关于我",path:"/about"}],o=k(()=>s.isAuthenticated?[...r,{name:"管理后台",path:"/admin/dashboard"}]:r),i=()=>{t.value=window.scrollY>50},c=()=>{console.log("Toggle theme")},m=()=>{console.log("Toggle mobile menu")};return et(()=>{window.addEventListener("scroll",i)}),ot(()=>{window.removeEventListener("scroll",i)}),(_,l)=>{const p=v("t-icon"),u=v("t-button");return h(),E("header",{class:P(["header",{scrolled:t.value}])},[e("nav",lt,[e("div",ct,[n($(z),{to:"/",class:"brand-link"},{default:d(()=>[...l[0]||(l[0]=[e("span",{class:"brand-text"},"孙可馨的个人空间",-1)])]),_:1})]),e("div",ut,[(h(!0),E(x,null,G(o.value,f=>(h(),R($(z),{key:f.path,to:f.path,class:P(["nav-item",{active:_.$route.path===f.path}])},{default:d(()=>[w(L(f.name),1)]),_:2},1032,["to","class"]))),128))]),e("div",dt,[n(u,{theme:"default",variant:"text",onClick:c},{default:d(()=>[n(p,{name:"mode-dark"})]),_:1}),n(u,{theme:"default",variant:"text",onClick:m},{default:d(()=>[n(p,{name:"menu"})]),_:1})])])],2)}}}),C=(a,s)=>{const t=a.__vccOpts||a;for(const[r,o]of s)t[r]=o;return t},_t=C(mt,[["__scopeId","data-v-c638c5f8"]]),pt={class:"footer"},ft={class:"container"},vt={class:"footer-content"},ht={class:"footer-section"},gt={class:"footer-links"},bt={class:"footer-section"},yt={class:"footer-contact"},wt={class:"contact-item"},At={class:"contact-item"},Et=T({__name:"AppFooter",setup(a){return(s,t)=>{const r=v("RouterLink"),o=v("t-icon");return h(),E("footer",pt,[e("div",ft,[e("div",vt,[t[8]||(t[8]=e("div",{class:"footer-section"},[e("h3",{class:"footer-title"},"孙可馨的个人空间"),e("p",{class:"footer-description"}," 专注于绘画与摄影创作，记录生活点滴，分享艺术之美。 ")],-1)),e("div",ht,[t[4]||(t[4]=e("h4",{class:"footer-subtitle"},"快速链接",-1)),e("ul",gt,[e("li",null,[n(r,{to:"/"},{default:d(()=>[...t[0]||(t[0]=[w("首页",-1)])]),_:1})]),e("li",null,[n(r,{to:"/portfolio"},{default:d(()=>[...t[1]||(t[1]=[w("作品展示",-1)])]),_:1})]),e("li",null,[n(r,{to:"/timeline"},{default:d(()=>[...t[2]||(t[2]=[w("时间线",-1)])]),_:1})]),e("li",null,[n(r,{to:"/about"},{default:d(()=>[...t[3]||(t[3]=[w("关于我",-1)])]),_:1})])])]),e("div",bt,[t[7]||(t[7]=e("h4",{class:"footer-subtitle"},"联系方式",-1)),e("div",yt,[e("div",wt,[n(o,{name:"mail"}),t[5]||(t[5]=e("span",null,"contact@sun-kexin.com",-1))]),e("div",At,[n(o,{name:"location"}),t[6]||(t[6]=e("span",null,"武汉理工大学",-1))])])])]),t[9]||(t[9]=e("div",{class:"footer-bottom"},[e("p",null,"© 2024 孙可馨的个人空间. All rights reserved.")],-1))])])}}}),kt=C(Et,[["__scopeId","data-v-1753af42"]]),St={class:"admin-layout"},Lt={class:"sidebar-header"},It={class:"admin-title"},Ot={class:"sidebar-nav"},Pt={class:"sidebar-footer"},$t={class:"main-content"},Rt={class:"top-header"},Tt={class:"header-left"},Ct={class:"page-title"},Dt={class:"header-right"},Vt={class:"username"},xt={class:"content-area"},Nt=T({__name:"AdminLayout",setup(a){const s=nt(),t=M(),r=N(),o=I(!1),i=k(()=>r.user),c=[{path:"/admin/dashboard",title:"仪表盘",icon:"dashboard"},{path:"/admin/works",title:"作品管理",icon:"image"},{path:"/admin/settings",title:"网站设置",icon:"setting"}],m=k(()=>{const f=c.find(g=>g.path===t.path);return(f==null?void 0:f.title)||"管理后台"}),_=()=>{o.value=!o.value},l=()=>{window.open("/","_blank")},p=()=>{console.log("跳转到个人资料")},u=()=>{r.logout(),s.push("/admin/login")};return(f,g)=>{const y=v("t-icon"),O=v("t-button"),q=v("router-link"),Q=v("t-avatar"),B=v("t-dropdown-item"),Y=v("t-dropdown-menu"),X=v("t-dropdown"),Z=v("router-view");return h(),E("div",St,[e("aside",{class:P(["sidebar",{collapsed:o.value}])},[e("div",Lt,[D(e("h2",It," 管理后台 ",512),[[V,!o.value]]),n(O,{theme:"default",variant:"text",onClick:_,class:"collapse-btn"},{default:d(()=>[o.value?(h(),R(y,{key:1,name:"menu-unfold"})):(h(),R(y,{key:0,name:"menu-fold"}))]),_:1})]),e("nav",Ot,[(h(),E(x,null,G(c,A=>n(q,{key:A.path,to:A.path,class:P(["nav-item",{active:f.$route.path===A.path}])},{default:d(()=>[n(y,{name:A.icon},null,8,["name"]),D(e("span",null,L(A.title),513),[[V,!o.value]])]),_:2},1032,["to","class"])),64))]),e("div",Pt,[n(q,{to:"/",class:"back-to-site"},{default:d(()=>[n(y,{name:"home"}),D(e("span",null,"返回网站",512),[[V,!o.value]])]),_:1})])],2),e("div",$t,[e("header",Rt,[e("div",Tt,[n(O,{theme:"default",variant:"text",onClick:_,class:"mobile-menu-btn"},{default:d(()=>[n(y,{name:"menu"})]),_:1}),e("h1",Ct,L(m.value),1)]),e("div",Dt,[n(O,{theme:"default",variant:"text",onClick:l},{default:d(()=>[n(y,{name:"browse"}),g[0]||(g[0]=w(" 预览网站 ",-1))]),_:1}),n(X,{trigger:"click"},{default:d(()=>[n(O,{theme:"default",variant:"text"},{default:d(()=>{var A,F;return[n(Q,{image:(A=i.value)==null?void 0:A.avatar,size:"small"},{default:d(()=>{var H,J,j;return[w(L((j=(J=(H=i.value)==null?void 0:H.username)==null?void 0:J.charAt(0))==null?void 0:j.toUpperCase()),1)]}),_:1},8,["image"]),e("span",Vt,L((F=i.value)==null?void 0:F.username),1),n(y,{name:"chevron-down"})]}),_:1}),n(Y,null,{default:d(()=>[n(B,{onClick:p},{default:d(()=>[n(y,{name:"user"}),g[1]||(g[1]=w(" 个人资料 ",-1))]),_:1}),n(B,{onClick:u},{default:d(()=>[n(y,{name:"logout"}),g[2]||(g[2]=w(" 退出登录 ",-1))]),_:1})]),_:1})]),_:1})])]),e("main",xt,[n(Z)])])])}}}),Ut=C(Nt,[["__scopeId","data-v-915d737d"]]),qt={id:"app",class:"app"},Bt={class:"main-content"},Ft=T({__name:"App",setup(a){const s=M(),t=k(()=>{var r;return((r=s.meta)==null?void 0:r.layout)==="admin"||s.path.startsWith("/admin")});return(r,o)=>(h(),E("div",qt,[t.value?(h(),R(Ut,{key:0},{default:d(()=>[n($(W))]),_:1})):(h(),E(x,{key:1},[n(_t),e("main",Bt,[n($(W))]),n(kt)],64))]))}}),Ht=C(Ft,[["__scopeId","data-v-28e1c0f7"]]),Jt="modulepreload",jt=function(a){return"/"+a},K={},b=function(s,t,r){let o=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),m=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));o=Promise.allSettled(t.map(_=>{if(_=jt(_),_ in K)return;K[_]=!0;const l=_.endsWith(".css"),p=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${p}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":Jt,l||(u.as="script"),u.crossOrigin="",u.href=_,m&&u.setAttribute("nonce",m),document.head.appendChild(u),l)return new Promise((f,g)=>{u.addEventListener("load",f),u.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${_}`)))})}))}function i(c){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=c,window.dispatchEvent(m),!m.defaultPrevented)throw c}return o.then(c=>{for(const m of c||[])m.status==="rejected"&&i(m.reason);return s().catch(i)})},S=(a,s,t)=>{N().isAuthenticated?t():t("/admin/login")},zt=at({history:st("/"),routes:[{path:"/",name:"home",component:()=>b(()=>import("./Home-4q_r8Clj.js"),__vite__mapDeps([0,1,2,3,4,5]))},{path:"/portfolio",name:"portfolio",component:()=>b(()=>import("./Portfolio-ZDRfQBlR.js"),__vite__mapDeps([6,1,3,4,7]))},{path:"/portfolio/:id",name:"portfolio-detail",component:()=>b(()=>import("./PortfolioDetail-zNIJ7y4L.js"),__vite__mapDeps([8,1,3,4,9]))},{path:"/about",name:"about",component:()=>b(()=>import("./About-B_761e2L.js"),__vite__mapDeps([10,1,11,12,13,14]))},{path:"/admin",redirect:"/admin/dashboard"},{path:"/admin/login",name:"admin-login",component:()=>b(()=>import("./Login-C5Mpje-j.js"),__vite__mapDeps([15,11,1,12,13,16])),meta:{layout:"admin"}},{path:"/admin/dashboard",name:"admin-dashboard",component:()=>b(()=>import("./Dashboard-B-Z3pKgC.js"),__vite__mapDeps([17,1,3,2,18])),meta:{layout:"admin",requiresAuth:!0},beforeEnter:S},{path:"/admin/works",name:"admin-works",component:()=>b(()=>import("./Works-fVdSGgIm.js"),__vite__mapDeps([19,1,3,12,13,20])),meta:{layout:"admin",requiresAuth:!0},beforeEnter:S},{path:"/admin/works/create",name:"admin-work-create",component:()=>b(()=>import("./WorkEdit-fmqSALcs.js"),__vite__mapDeps([21,1,3,12,13,22])),meta:{layout:"admin",requiresAuth:!0},beforeEnter:S},{path:"/admin/works/:id/edit",name:"admin-work-edit",component:()=>b(()=>import("./WorkEdit-fmqSALcs.js"),__vite__mapDeps([21,1,3,12,13,22])),meta:{layout:"admin",requiresAuth:!0},beforeEnter:S},{path:"/admin/settings",name:"admin-settings",component:()=>b(()=>import("./Settings-Yqjg-lId.js"),__vite__mapDeps([23,2,1,12,13,24])),meta:{layout:"admin",requiresAuth:!0},beforeEnter:S}],scrollBehavior(a,s,t){return t||{top:0}}}),U=rt(Ht),Wt=it();U.use(Wt);U.use(zt);U.mount("#app");export{C as _,N as u};
//# sourceMappingURL=index-Dfbevo4_.js.map
